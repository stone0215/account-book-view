(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-4732"],{Wlzd:function(t,e,a){"use strict";a.r(e);var n=a("jWXv"),i=a.n(n),r=a("m1cH"),s=a.n(r),o=a("GQeE"),l=a.n(o),c=a("wd/R"),h=a.n(c),u=a("MT78"),d=a.n(u),f=a("7Qib");a("gX0l");var p={props:{width:{type:String,default:"100%"},height:{type:String,default:"300px"},pieName:{type:String,default:""},content:{type:Array,default:null}},data:function(){return{chart:null}},watch:{content:{deep:!0,handler:function(t){this.chart.setOption({series:[{data:t}]})}}},mounted:function(){var t=this;this.initChart(),this.__resizeHandler=Object(f.a)(function(){t.chart&&t.chart.resize()},100),window.addEventListener("resize",this.__resizeHandler)},beforeDestroy:function(){this.chart&&(window.removeEventListener("resize",this.__resizeHandler),this.chart.dispose(),this.chart=null)},methods:{initChart:function(){this.chart=d.a.init(this.$el,"dark");var t=this;this.chart.on("click",function(e){t.$emit("clickPie",e)}),this.chart.setOption({tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c} ({d}%)"},series:[{name:this.pieName,type:"pie",radius:"50%",data:this.content,emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]})}}},m=a("KHd+"),v=Object(m.a)(p,function(){var t=this.$createElement;return(this._self._c||t)("div",{style:{height:this.height,width:this.width}})},[],!1,null,null,null);v.options.__file="PieChart.vue";var g={name:"AssetReport",components:{PieChart:v.exports},data:function(){return{periodType:"month",dateFormat:"yyyyMM",dateType:"month",dateValue:null,sourceList:[],chartCategory:[],detailPie:[],type:"all"}},computed:{assetPieContent:function(){var t=this,e=[];return this.chartCategory.forEach(function(a){if("股票"===a){var n=t.getGroupedData(a);l()(n).forEach(function(t){e.push({name:t,value:n[t]})})}else e.push({name:a,value:t.getTableContent(a).reduce(function(t,e){return t+e.amount},0)})}),0===this.detailPie.length&&this.getDetailPie(),e}},created:function(){this.dateValue=h()().format("YYYYMM"),this.fetchData()},methods:{fetchData:function(){var t=this;this.$store.dispatch("GetAssetList").then(function(e){t.sourceList=e.data,t.chartCategory=[].concat(s()(new i.a(e.data.map(function(t){return t.assetType}))))})},changePeriod:function(t){this.type="all",this.dateValue="year"===t?h()().format("YYYY"):h()().format("YYYYMM"),this.fetchData()},getTableContent:function(t){return this.sourceList.filter(function(e){return e.assetType===t})},getDetailPie:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{name:"現金"};if(this.sourceList.some(function(t){return t.assetType===e.name})){this.detailPie=[];var a=this.getGroupedData(e.name);l()(a).forEach(function(e){t.detailPie.push({name:e,value:a[e]})})}else this.detailPie=this.sourceList.filter(function(t){return t.detailType===e.name}).map(function(t){return{name:t.name,value:t.amount}})},getGroupedData:function(t){return this.getTableContent(t).reduce(function(t,e){var a=e.detailType;return t[a]=t[a]||0,t[a]+=e.amount,t},{})}}},y=(a("lNR2"),Object(m.a)(g,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page spending-report"},[a("div",{staticClass:"main-content"},[a("div",{staticClass:"up-side"},[t.chartCategory.length>0?a("PieChart",{attrs:{content:t.assetPieContent,"pie-name":"資產占比",width:"50%"},on:{clickPie:t.getDetailPie}}):a("div",{staticClass:"no-data"},[t._v("尚無消費行為")]),t._v(" "),t.detailPie.length>0?a("PieChart",{attrs:{content:t.detailPie,"pie-name":"各類資產明細占比",width:"50%"}}):a("div",{staticClass:"no-data"},[t._v("尚無資產異動行為")])],1),t._v(" "),a("div",{staticClass:"down-area"},t._l(t.chartCategory,function(e,n){return a("div",{key:n},[t._v("\n        "+t._s(e)+"\n        "),a("el-table",{attrs:{data:t.getTableContent(e),"header-cell-class-name":"table-header"}},[a("el-table-column",{attrs:{label:"名稱",prop:"name","header-align":"center",align:"right"}}),t._v(" "),a("el-table-column",{attrs:{label:"金額","header-align":"center",align:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v("\n                "+t._s(t._f("toThousandFilter")(e.row.amount,2))+"\n              ")])]}}])})],1)],1)}))])])},[],!1,null,"5e093963",null));y.options.__file="index.vue";e.default=y.exports},lNR2:function(t,e,a){"use strict";var n=a("uJJm");a.n(n).a},uJJm:function(t,e,a){}}]);