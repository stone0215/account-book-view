(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-e3e7"],{"7BHm":function(e,t,a){"use strict";a.d(t,"a",function(){return y});var n=a("Q2AE"),r=a("QC1J"),u=a("95hE"),i=a("Kz9k"),l=a("O+mA"),o=a("rrfz"),s=a("zbHW"),c=a("HY6s");function y(e,t){var a=null;switch(e){case"account":a=n.a.state.setting.menu.account.accountSelectList;break;case"account_type":a=r.a;break;case"asset_type":a=o.c;break;case"code_type":a=u.a;break;case"estate_excute_type":a=c.a;break;case"estate_status":a=c.b;break;case"estate_type":a=c.c;break;case"excute_type":a=c.f;break;case"feedback_way":a=i.a;break;case"fx_code":a=l.a;break;case"initial_type":a=o.a;break;case"insurance_excute_type":a=c.d;break;case"pay_type":a=c.e;break;case"loan_type":a=s.b;break;case"loan_excute_type":a=s.a;break;case"yes_no":a=o.d;break;default:return t}var y=a.find(function(e){return e.key===t});return y?y.value:t}},"95hE":function(e,t,a){"use strict";a.d(t,"a",function(){return n});var n=[{key:"Floating",value:"浮動支出",addable:!0},{key:"Income",value:"主動收入",addable:!0},{key:"Fixed",value:"固定支出",addable:!0},{key:"Passive",value:"被動收入",addable:!0}]},HY6s:function(e,t,a){"use strict";a.d(t,"f",function(){return n}),a.d(t,"e",function(){return r}),a.d(t,"d",function(){return u}),a.d(t,"b",function(){return i}),a.d(t,"c",function(){return l}),a.d(t,"a",function(){return o}),a.d(t,"g",function(){return s});var n=[{key:"buy",value:"買入"},{key:"sell",value:"賣出"},{key:"stock",value:"配股"},{key:"cash",value:"配息"}],r=[{key:"month",value:"月繳"},{key:"season",value:"季繳"},{key:"year",value:"年繳"},{key:"once",value:"躉繳"}],u=[{key:"pay",value:"扣款"},{key:"cash",value:"配息"},{key:"expect",value:"預期價值"},{key:"return",value:"贖回"}],i=[{key:"idle",value:"閒置"},{key:"live",value:"居住"},{key:"rent",value:"出租"},{key:"sold",value:"賣出"}],l=[{key:"house",value:"獨棟透天"},{key:"townhouse",value:"連棟透天"},{key:"condo",value:"公寓"},{key:"apartment",value:"電梯大樓"},{key:"highrise",value:"商辦"},{key:"land",value:"土地"}],o=[{key:"downPayment",value:"初始本金/頭期款"},{key:"tax",value:"稅金"},{key:"fee",value:"雜費"},{key:"insurance",value:"保險"},{key:"fix",value:"修繕"},{key:"rent",value:"租金"},{key:"deposit",value:"押金"},{key:"sold",value:"賣出"},{key:"marketValue",value:"市值"}],s=[{key:"TW",value:"台灣"},{key:"US",value:"美國"}]},KbRY:function(e,t,a){},Kz9k:function(e,t,a){"use strict";a.d(t,"a",function(){return n});var n=[{key:"None",value:"無"},{key:"Cash",value:"現金"},{key:"Point",value:"紅利"}]},"O+mA":function(e,t,a){"use strict";a.d(t,"a",function(){return n});var n=[{value:"新台幣",key:"TWD",inUse:!0},{value:"美元",key:"USD",inUse:!0},{value:"港幣",key:"HKD",inUse:!1},{value:"英磅",key:"GBP",inUse:!1},{value:"澳幣",key:"AUD",inUse:!1},{value:"新加坡幣",key:"SGD",inUse:!1},{value:"瑞士法郎",key:"CHF",inUse:!1},{value:"加幣",key:"CAD",inUse:!1},{value:"日圓",key:"JPY",inUse:!0},{value:"瑞典克郎",key:"SEK",inUse:!1},{value:"歐元",key:"EUR",inUse:!1},{value:"紐西蘭幣",key:"NZD",inUse:!1},{value:"泰銖",key:"THB",inUse:!1},{value:"南非幣",key:"ZAR",inUse:!1},{value:"人民幣",key:"CNY",inUse:!1}]},QC1J:function(e,t,a){"use strict";a.d(t,"a",function(){return n});var n=[{key:"normal",value:"一般帳戶"},{key:"finance",value:"財務規劃帳戶"},{key:"eWallet",value:"電子錢包"},{key:"gift",value:"禮券"},{key:"cash",value:"現金"}]},lzDl:function(e,t,a){"use strict";a.r(t);var n=a("jWXv"),r=a.n(n),u=a("m1cH"),i=a.n(u),l=a("wd/R"),o=a.n(l),s=a("MT78"),c=a.n(s),y=a("7Qib");a("gX0l");var d={props:{width:{type:String,default:"100%"},height:{type:String,default:"300px"},showPercentage:{type:Boolean,default:!0},xBar:{type:Array,default:null},content:{type:Array,default:null}},data:function(){return{chart:null}},watch:{content:{deep:!0,handler:function(e){this.chart.dispose(),this.chart=null,this.initChart()}}},mounted:function(){var e=this;this.initChart(),this.__resizeHandler=Object(y.a)(function(){e.chart&&e.chart.resize()},100),window.addEventListener("resize",this.__resizeHandler)},beforeDestroy:function(){this.chart&&(window.removeEventListener("resize",this.__resizeHandler),this.chart.dispose(),this.chart=null)},methods:{initChart:function(){this.chart=c.a.init(this.$el,"dark"),this.chart.setOption({tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{top:10,left:"2%",right:"2%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",data:this.xBar,axisTick:{alignWithLabel:!0}}],yAxis:[{type:"value",name:"金額",axisLabel:{formatter:"{value} 元"}},{type:"value",name:"百分比",axisLabel:{formatter:"{value} %"},show:this.showPercentage}],series:this.content})}}},p=a("KHd+"),h=Object(p.a)(d,function(){var e=this.$createElement;return(this._self._c||e)("div",{style:{height:this.height,width:this.width}})},[],!1,null,null,null);h.options.__file="BarChart.vue";var v=h.exports,k=a("7BHm"),f={name:"SpendingReport",components:{BarChart:v},data:function(){return{periodType:"month",dateFormat:"yyyyMM",dateType:"month",dateValue:null,sourceList:[],chartCategory:null,chartContent:[],type:"all"}},computed:{incomes:function(){return this.getIncomeByInput(this.dateValue)},spendings:function(){return this.getSpendingByInput(this.dateValue)}},created:function(){this.dateValue=o()().format("YYYYMM"),this.fetchData()},methods:{fetchData:function(){var e=this;this.$store.dispatch("GetSpendingList",{type:this.periodType,dateValue:this.dateValue}).then(function(t){e.sourceList=t.data,e.chartCategory=[].concat(i()(new r.a(t.data.map(function(e){return e.dateString})))).sort(),-1===e.chartCategory.indexOf(e.dateValue)&&(e.dateValue=o()(Math.max.apply(null,e.chartCategory)+("month"===e.dateType?"01":"0101")).format("month"===e.dateType?"YYYYMM":"YYYY")),e.generateChartContent()})},changePeriod:function(e){this.type="all",this.dateValue="year"===e?o()().format("YYYY"):o()().format("YYYYMM"),this.fetchData()},getSum:function(e,t){return this.sourceList.filter(function(a){return a.dateString===e&&a.type===t}).reduce(function(e,t){return e+t.amount},0)},getIncomeByInput:function(e){return[{type:Object(k.a)("code_type","Income"),amount:this.getSum(e,"Income")},{type:Object(k.a)("code_type","Passive"),amount:this.getSum(e,"Passive")}]},getSpendingByInput:function(e){return[{type:Object(k.a)("code_type","Floating"),amount:this.getSum(e,"Floating")},{type:Object(k.a)("code_type","Fixed"),amount:this.getSum(e,"Fixed")},{type:"貸款支出",amount:this.getSum(e,"Loan")}]},changeChart:function(e){this.type=e,this.generateChartContent()},generateChartContent:function(){var e=this,t=[],a=[],n=[],r=[],u=[],i=[],l=[],o=[];this.chartCategory.forEach(function(s){var c=0,y=0;if("income"===e.type||"all"===e.type){var d=e.getIncomeByInput(s);d.forEach(function(e){"主動收入"===e.type?t.push(e.amount):a.push(e.amount)}),c=d.reduce(function(e,t){return e+t.amount},0),"income"===e.type&&n.push(c)}if("spending"===e.type||"all"===e.type){var p=e.getSpendingByInput(s);p.forEach(function(e){"浮動支出"===e.type?r.push(e.amount):"固定支出"===e.type?u.push(e.amount):i.push(e.amount)}),y=p.reduce(function(e,t){return e+t.amount},0),"spending"===e.type&&l.push(y)}"all"===e.type&&o.push(c?100*(y/c).toFixed(2):y)});var s=null;s="income"===this.type?[{name:"主動收入",type:"bar",stack:"Income",data:t},{name:"被動收入",type:"bar",stack:"Income",data:a},{name:"總收入",type:"line",data:n}]:"spending"===this.type?[{name:"浮動支出",type:"bar",stack:"Spending",data:r},{name:"固定支出",type:"bar",stack:"Spending",data:u},{name:"貸款支出",type:"bar",stack:"Spending",data:i},{name:"總支出",type:"line",data:l}]:[{name:"主動收入",type:"bar",stack:"Income",data:t},{name:"被動收入",type:"bar",stack:"Income",data:a},{name:"浮動支出",type:"bar",stack:"Spending",data:r},{name:"固定支出",type:"bar",stack:"Spending",data:u},{name:"貸款支出",type:"bar",stack:"Spending",data:i},{name:"收支比",type:"line",yAxisIndex:1,data:o}],this.chartContent=s}}},m=(a("o3Qa"),Object(p.a)(f,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page spending-report"},[a("div",{staticClass:"conditon position-right"},["month"===e.periodType?a("el-date-picker",{attrs:{type:"month","value-format":"yyyyMM",placeholder:"請選擇"},on:{change:e.fetchData},model:{value:e.dateValue,callback:function(t){e.dateValue=t},expression:"dateValue"}}):a("el-date-picker",{attrs:{type:"year","value-format":"yyyy",placeholder:"請選擇"},on:{change:e.fetchData},model:{value:e.dateValue,callback:function(t){e.dateValue=t},expression:"dateValue"}}),e._v(" "),a("el-radio-group",{on:{change:e.changePeriod},model:{value:e.periodType,callback:function(t){e.periodType=t},expression:"periodType"}},[a("el-radio-button",{attrs:{label:"year"}},[e._v("年")]),e._v(" "),a("el-radio-button",{attrs:{label:"month"}},[e._v("月")])],1)],1),e._v(" "),e.chartContent.length>0?a("BarChart",{attrs:{"show-percentage":"all"===e.type,"x-bar":e.chartCategory,content:e.chartContent}}):e._e(),e._v(" "),a("div",{staticClass:"down-area"},[a("div",[a("el-button",{attrs:{type:"text"},on:{click:function(t){e.changeChart("income")}}},[e._v("收入")]),e._v(" "),a("el-table",{attrs:{data:e.incomes,"header-cell-class-name":"table-header"}},[a("el-table-column",{attrs:{label:"分類",prop:"type","header-align":"center",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"金額","header-align":"center",align:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v("\n              "+e._s(e._f("toThousandFilter")(t.row.amount,2))+"\n            ")])]}}])})],1)],1),e._v(" "),a("div",[a("el-button",{attrs:{type:"text"},on:{click:function(t){e.changeChart("spending")}}},[e._v("支出")]),e._v(" "),a("el-table",{attrs:{data:e.spendings,"header-cell-class-name":"table-header"}},[a("el-table-column",{attrs:{label:"分類",prop:"type","header-align":"center",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"金額","header-align":"center",align:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v("\n              "+e._s(e._f("toThousandFilter")(t.row.amount))+"\n            ")])]}}])})],1)],1)])],1)},[],!1,null,"60ef778e",null));m.options.__file="index.vue";t.default=m.exports},o3Qa:function(e,t,a){"use strict";var n=a("KbRY");a.n(n).a},rrfz:function(e,t,a){"use strict";a.d(t,"d",function(){return n}),a.d(t,"a",function(){return r}),a.d(t,"c",function(){return u}),a.d(t,"b",function(){return i});var n=[{key:"Y",value:"是"},{key:"N",value:"否"}],r=[{key:"Account",value:"銀行帳戶"},{key:"CreditCard",value:"信用卡"},{key:"Money",value:"現金"},{key:"Loan",value:"貸款"}],u=[{key:"Stock",value:"股票",index:1,table:"Stock_Detail",type:"Asset"},{key:"Insurance",value:"保險",index:2,table:"Insurance_Journal",type:"Asset"},{key:"Estate",value:"房地產",index:3,table:"Estate_Journal",type:"Asset"}],i=[{key:"Transfer",value:"轉帳",index:2,table:"Account"},{key:"CreditCardRepayment",value:"繳信用卡款",index:4,table:"CreditCard"},{key:"LoanRepayment",value:"繳貸款",index:5,table:"Loan"},{key:"Premiums",value:"繳保費",index:6,table:"Insurance"}]},zbHW:function(e,t,a){"use strict";a.d(t,"b",function(){return n}),a.d(t,"a",function(){return r});var n=[{key:"unsecured",value:"信貸"},{key:"mortgage",value:"房貸"},{key:"financial",value:"理財型房貸"},{key:"secured",value:"擔保貸款"}],r=[{key:"principal",value:"償還本金"},{key:"interest",value:"支付利息"},{key:"increment",value:"增貸"},{key:"fee",value:"雜費"}]}}]);